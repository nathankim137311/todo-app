(()=>{"use strict";class t{static showForm(t){const e=t.target.textContent;"Add Task"===e?(t.target.style.backgroundColor="red",t.target.textContent="Close",document.getElementById("form-container").classList.add("active")):"Close"===e&&(t.target.style.backgroundColor="#5865F2",t.target.textContent="Add Task",document.getElementById("form-container").classList.remove("active"))}static removeAllChildNodes(t){for(;t.firstChild;)t.removeChild(t.firstChild)}}class e{constructor(t,s,a,o,c){this.id=JSON.parse(localStorage.getItem("id"))+1,this.title=t,this.description=s,this.project=a,this.priority=o,this.date=c,this.status="incomplete",e.saveId(this.id)}static saveId(t){const e=t;localStorage.setItem("id",JSON.stringify(e))}}function s(t){const e=document.getElementById("task-list"),s=document.createElement("li"),a=document.createElement("div");a.classList.add("todo-item"),a.setAttribute("id",`${t.id}`);const o=document.createElement("div");o.classList.add("container-1");const c=document.createElement("input");c.classList.add("checkbox"),c.setAttribute("type","checkbox");const n=document.createElement("span");n.textContent=t.title,o.append(c,n);const l=document.createElement("div");l.classList.add("container-2");const r=document.createElement("div"),i=document.createElement("span");i.innerHTML='<span class="material-icons-outlined"><a title="delete task" href="#">delete</a></span>',l.append(r,i),function(t,e){switch(t.toLowerCase()){case"high":e.style.backgroundColor="#FF0000";break;case"medium":e.style.backgroundColor="#FECD19";break;case"low":e.style.backgroundColor="#6FB202"}}(t.priority,r),e.appendChild(s),s.appendChild(a),a.append(o,l)}class a{static createProject(e){const s=document.getElementById("project-list");t.removeAllChildNodes(s);for(let t=0;t<e.length;t++){const a=document.createElement("li"),o=document.createElement("a");o.setAttribute("href","#"),o.textContent=`${e[t]}`,s.appendChild(a),a.appendChild(o)}}}let o=[],c=[],n=[];class l{static saveTask(t){o.push(t),localStorage.setItem("tasks",JSON.stringify(o))}static saveProject(t){c.push(t);const e=[...new Set(c)];return localStorage.setItem("projects",JSON.stringify(e)),e}static saveStatus(t){n.push(t),localStorage.setItem("statuses",JSON.stringify(n))}}class r extends l{static itemsFromStorage(){this.tasks(),this.projects()}static tasks(){null===localStorage.getItem("tasks")?o=[]:(o=JSON.parse(localStorage.getItem("tasks")),this.loadTasks(o))}static projects(){null===localStorage.getItem("projects")?c=[]:(c=JSON.parse(localStorage.getItem("projects")),this.loadProjects(c))}static loadTasks(t){for(let e=0;e<t.length;e++)s(t[e])}static loadProjects(t){a.createProject(t)}}class i{static toggleStatus(t,e){const s=JSON.parse(localStorage.getItem("tasks")),a=JSON.parse(localStorage.getItem("statuses")),o=s.findIndex((e=>e.id==t));switch(e){case"complete":case"incomplete":s[o].status=e,a[o]=e,localStorage.setItem("tasks",JSON.stringify(s)),localStorage.setItem("statuses",JSON.stringify(a))}}}const d=document.getElementById("form"),m=document.getElementById("add-task-link"),u=document.getElementById("add-task-btn"),g=document.getElementById("project-link");window.onload=function(){r.itemsFromStorage(),document.querySelectorAll(".checkbox").forEach((t=>{t.addEventListener("change",(t=>{t.target.checked?i.toggleStatus(t.target.parentNode.parentNode.id,"complete"):i.toggleStatus(t.target.parentNode.parentNode.id,"incomplete")}))}))},d.addEventListener("click",(t=>{t.preventDefault()})),m.addEventListener("click",(e=>{t.showForm(e)})),u.addEventListener("click",(()=>{const t=function(){document.getElementById("title-input").value,document.getElementById("description-input").value,document.getElementById("project-input").value,document.getElementById("priority-input").value,document.getElementById("date-input").value;const t=new e("Homework","complete homework before 9pm","School","high","11/13/21");return s(t),t}();l.saveTask(t);const o=l.saveProject(t.project);a.createProject(o),l.saveStatus(t.status)})),g.addEventListener("click",(()=>{document.getElementById("project-list").classList.toggle("active")}))})();