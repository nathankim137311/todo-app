(()=>{"use strict";class t{static showForm(t){const e=t.target.textContent;"Add Task"===e?(t.target.style.backgroundColor="red",t.target.textContent="Close",document.getElementById("form-container").classList.add("active")):"Close"===e&&(t.target.style.backgroundColor="#5865F2",t.target.textContent="Add Task",document.getElementById("form-container").classList.remove("active"))}static removeAllChildNodes(t){for(;t.firstChild;)t.removeChild(t.firstChild)}static filter(t){return JSON.parse(localStorage.getItem("tasks")).filter((e=>e.project===t))}static defaultValue(t,e){for(let n,s=0;n=t.options[s];s++)if(n.value==e){t.selectedIndex=s;break}}static findSumOfArray(t){let e=0;for(let n in t)e+=t[n];return e}static getOccAndNames(t){const e=t.reduce(((t,e)=>t.set(e,(t.get(e)||0)+1)),new Map);return[[...e.values()],[...e.keys()]]}}class e{static toggleStatus(t,e){const n=JSON.parse(localStorage.getItem("tasks")),s=n.findIndex((e=>e.id==t));n[s].status=e,localStorage.setItem("tasks",JSON.stringify(n))}}class n{constructor(t,e,s,a,o){this.id=JSON.parse(localStorage.getItem("id"))+1,this.title=t,this.description=e,this.project=s,this.priority=a,this.date=o,this.status="incomplete",n.saveId(this.id)}static saveId(t){const e=t;localStorage.setItem("id",JSON.stringify(e))}static clearTaskList(){document.getElementById("task-list").innerHTML=""}static createNewTaskList(t){for(let e=0;e<t.length;e++)s(t[e])}}function s(n){const s=document.getElementById("task-list"),a=document.createElement("li");a.classList.add("todo-item-container");const o=document.createElement("div"),c=document.createElement("div");c.classList.add("todo-item"),c.setAttribute("id",`${n.id}`);const i=document.createElement("div");i.classList.add("task-info-div"),c.addEventListener("click",(()=>{i.classList.toggle("show")}));const d=document.createElement("div");d.classList.add("info-container-1");const l=document.createElement("span");l.textContent=`Project: ${n.project}`;const r=document.createElement("label");r.htmlFor="title-"+n.id,r.textContent="Title:";const u=document.createElement("input");u.setAttribute("id","title-"+n.id),u.setAttribute("type","text"),u.setAttribute("readonly","readonly"),u.textContent=`${n.title}`,u.setAttribute("value",`${n.title}`),u.classList.add("detail-inputs-"+n.id);const m=document.createElement("label");m.htmlFor="date-"+n.id,m.textContent="Due date:";const p=document.createElement("input");p.setAttribute("id","date-"+n.id),p.classList.add("detail-inputs-"+n.id),p.setAttribute("type","date"),p.setAttribute("value",`${n.date}`),p.setAttribute("readonly","readonly");const g=document.createElement("label");g.htmlFor="priority-"+n.id,g.textContent="Priority level:";const E=document.createElement("select");E.setAttribute("id","priority-"+n.id),E.classList.add("detail-inputs-"+n.id),E.setAttribute("value",n.priority),E.setAttribute("disabled","disabled");const h=document.createElement("option");h.setAttribute("value","low"),h.textContent="Low";const v=document.createElement("option");v.setAttribute("value","medium"),v.textContent="Medium";const y=document.createElement("option");y.setAttribute("value","high"),y.textContent="High",E.append(h,v,y),t.defaultValue(E,n.priority);const k=document.createElement("button");k.setAttribute("id","edit-btn"),k.innerHTML='<span class="material-icons-outlined">edit</span>',k.addEventListener("click",(()=>{(class{static toggleEdit(t,e){const n=[...document.querySelectorAll(".detail-inputs-"+e)];"Save"!==t.innerHTML?(t.innerHTML="Save",n.forEach((t=>{t.readOnly=!1,t.style.border="1px #5865F2 solid",t.removeAttribute("disabled")}))):(t.innerHTML='<span class="material-icons-outlined">edit</span>',n.forEach((t=>{t.readOnly=!0,t.style.border="1px transparent solid"})),this.saveEdit(e))}static saveEdit(t){const e=document.getElementById("title-"+t),n=document.getElementById("description-"+t),s=document.getElementById("date-"+t),a=document.getElementById("priority-"+t),o=JSON.parse(localStorage.getItem("tasks")),c=o.map((t=>t.id)).indexOf(t);o[c].title=e.value,o[c].description=n.value,o[c].date=s.value,o[c].priority=a.value,localStorage.setItem("tasks",JSON.stringify(o)),location.reload()}}).toggleEdit(k,n.id)})),d.append(l,r,u,m,p,g,E);const C=document.createElement("label");C.htmlFor="description-"+n.id,C.textContent="Description:";const b=document.createElement("textarea");b.setAttribute("id","description-"+n.id),b.classList.add("detail-inputs-"+n.id),b.setAttribute("type","text"),b.setAttribute("readonly","readonly"),b.textContent=`${n.description}`,b.setAttribute("value",`${n.description}`),i.append(d,C,b,k);const I=document.createElement("div");I.classList.add("container-1");const f=document.createElement("input");f.classList.add("checkbox"),f.setAttribute("type","checkbox");const L=document.createElement("span");L.textContent=`${n.title}`,"complete"===n.status&&(f.checked=!0,a.classList.add("active")),f.addEventListener("change",(()=>{a.classList.toggle("active"),i.classList.remove("show"),f.checked?e.toggleStatus(n.id,"complete"):e.toggleStatus(n.id,"incomplete")})),I.append(L,f);const S=document.createElement("div");S.classList.add("container-2");const x=document.createElement("div"),A=document.createElement("span");A.innerHTML='<span class="material-icons-outlined"><a id="delete-icon" title="delete task" href="#">delete</a></span>',A.addEventListener("click",(t=>{t.stopPropagation();const e=t.target.parentNode.parentNode.parentNode.parentNode.id;t.target.parentNode.parentNode.parentNode.parentNode.parentNode.remove(),function(t){const e=JSON.parse(localStorage.getItem("tasks")),n=e.findIndex((e=>e.id==t));e.splice(n,1),localStorage.setItem("tasks",JSON.stringify(e))}(e)})),S.append(x,A),function(t,e){switch(t.toLowerCase()){case"high":e.style.backgroundColor="#FF0000";break;case"medium":e.style.backgroundColor="#FECD19";break;case"low":e.style.backgroundColor="#6FB202"}}(n.priority,x),s.appendChild(a),a.appendChild(o),o.append(c,i),c.append(I,S)}class a{static createProject(e){const a=document.getElementById("project-list");t.removeAllChildNodes(a);for(let o=0;o<e.length;o++){const c=document.createElement("li"),i=document.createElement("div");i.setAttribute("id",`${e[o]}`);const d=document.createElement("a");d.setAttribute("href","#"),d.textContent=`${e[o]}`,i.appendChild(d);const l=document.getElementById("project-heading");d.addEventListener("click",(()=>{const e=d.textContent;l.textContent=e,n.clearTaskList();const s=t.filter(e);n.createNewTaskList(s)}));const r=document.getElementById("all-tasks");r.addEventListener("click",(()=>{l.textContent=r.textContent,n.clearTaskList();const t=JSON.parse(localStorage.getItem("tasks"));for(let e=0;e<t.length;e++)s(t[e])})),a.appendChild(c),c.appendChild(i)}}}class o{static createCounters(){const e=JSON.parse(localStorage.getItem("tasks")).map((t=>t.project)),n=t.getOccAndNames(e),s=n[0],a=n[1];this.addCountersToDom(a,s),this.addOccToInbox(s)}static addCountersToDom(t,e){for(let n=0;n<t.length;n++){const s=document.getElementById(`${t[n]}`),a=document.createElement("div");a.classList.add("project-counter");const o=document.createElement("p");o.classList.add("counter-integer"),a.appendChild(o),s.appendChild(a),o.textContent=`${e[n]}`}}static addOccToInbox(e){const n=t.findSumOfArray(e),s=document.getElementById("all-tasks-container"),a=document.createElement("div"),o=document.createElement("p");o.classList.add("counter-integer"),o.textContent=n,a.classList.add("project-counter"),a.appendChild(o),s.appendChild(a)}static updateCounters(){document.querySelectorAll(".project-counter").forEach((t=>t.remove())),this.createCounters()}}let c=[],i=[];class d{static saveTask(t){c.push(t),localStorage.setItem("tasks",JSON.stringify(c))}static saveProject(t){i.push(t);const e=[...new Set(i)];return localStorage.setItem("projects",JSON.stringify(e)),e}}class l extends d{static itemsFromStorage(){this.tasks(),this.projects(),this.counters()}static tasks(){null===localStorage.getItem("tasks")?c=[]:(c=JSON.parse(localStorage.getItem("tasks")),this.loadTasks(c))}static projects(){null===localStorage.getItem("projects")?i=[]:(i=JSON.parse(localStorage.getItem("projects")),this.loadProjects(i))}static counters(){null===localStorage.getItem("tasks")?c=[]:o.createCounters()}static loadTasks(t){for(let e=0;e<t.length;e++)s(t[e])}static loadProjects(t){a.createProject(t)}}const r=document.getElementById("form"),u=document.getElementById("add-task-link"),m=document.getElementById("add-task-btn"),p=document.getElementById("project-link");window.onload=function(){l.itemsFromStorage()},r.addEventListener("click",(t=>{t.preventDefault()})),u.addEventListener("click",(e=>{t.showForm(e)})),m.addEventListener("click",(()=>{const t=function(){document.getElementById("title-input").value,document.getElementById("description-input").value,document.getElementById("project-input").value,document.getElementById("priority-input").value,document.getElementById("date-input").value;const t=new n("Take out the Trash","poop in bag and eat it","Chores","low","2021-11-16");return s(t),t}();d.saveTask(t);const e=d.saveProject(t.project);a.createProject(e),o.updateCounters()})),p.addEventListener("click",(()=>{document.getElementById("project-list").classList.toggle("active")}))})();