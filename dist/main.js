(()=>{"use strict";class t{static showForm(t){const e=t.target.textContent;"Add Task"===e?(t.target.style.backgroundColor="red",t.target.textContent="Close",document.getElementById("form-container").classList.add("active")):"Close"===e&&(t.target.style.backgroundColor="#5865F2",t.target.textContent="Add Task",document.getElementById("form-container").classList.remove("active"))}static removeAllChildNodes(t){for(;t.firstChild;)t.removeChild(t.firstChild)}static filter(t){return JSON.parse(localStorage.getItem("tasks")).filter((e=>e.project===t))}}class e{static toggleStatus(t,e){const s=JSON.parse(localStorage.getItem("tasks")),a=s.findIndex((e=>e.id==t));s[a].status=e,localStorage.setItem("tasks",JSON.stringify(s))}}class s{constructor(t,e,a,o,n){this.id=JSON.parse(localStorage.getItem("id"))+1,this.title=t,this.description=e,this.project=a,this.priority=o,this.date=n,this.status="incomplete",s.saveId(this.id)}static saveId(t){const e=t;localStorage.setItem("id",JSON.stringify(e))}static clearTaskList(){document.getElementById("task-list").innerHTML=""}static createNewTaskList(t){for(let e=0;e<t.length;e++)a(t[e])}}function a(t){const s=document.getElementById("task-list"),a=document.createElement("li"),o=document.createElement("div");o.classList.add("todo-item"),o.setAttribute("id",`${t.id}`);const n=document.createElement("div");n.classList.add("container-1");const c=document.createElement("input");c.classList.add("checkbox"),c.setAttribute("type","checkbox"),"complete"===t.status&&(c.checked=!0,o.classList.add("active")),c.addEventListener("change",(s=>{o.classList.toggle("active"),c.checked?e.toggleStatus(t.id,"complete"):e.toggleStatus(t.id,"incomplete")}));const l=document.createElement("span");l.textContent=t.title,n.append(c,l);const i=document.createElement("div");i.classList.add("container-2");const r=document.createElement("div"),d=document.createElement("span");d.innerHTML='<span class="material-icons-outlined"><a id="delete-icon" title="delete task" href="#">delete</a></span>',d.addEventListener("click",(t=>{const e=t.target.parentNode.parentNode.parentNode.parentNode.id;t.target.parentNode.parentNode.parentNode.parentNode.parentNode.remove(),function(t){const e=JSON.parse(localStorage.getItem("tasks")),s=e.findIndex((e=>e.id==t));e.splice(s,1),localStorage.setItem("tasks",JSON.stringify(e))}(e)})),i.append(r,d),function(t,e){switch(t.toLowerCase()){case"high":e.style.backgroundColor="#FF0000";break;case"medium":e.style.backgroundColor="#FECD19";break;case"low":e.style.backgroundColor="#6FB202"}}(t.priority,r),s.appendChild(a),a.appendChild(o),o.append(n,i)}class o{static createProject(e){const o=document.getElementById("project-list");t.removeAllChildNodes(o);for(let n=0;n<e.length;n++){const c=document.createElement("li"),l=document.createElement("a");l.setAttribute("href","#"),l.textContent=`${e[n]}`;const i=document.getElementById("project-heading");l.addEventListener("click",(()=>{const e=l.textContent;i.textContent=e,s.clearTaskList();const a=t.filter(e);s.createNewTaskList(a)}));const r=document.getElementById("all-tasks");r.addEventListener("click",(()=>{i.textContent=r.textContent,s.clearTaskList();const t=JSON.parse(localStorage.getItem("tasks"));for(let e=0;e<t.length;e++)a(t[e])})),o.appendChild(c),c.appendChild(l)}}}let n=[],c=[];class l{static saveTask(t){n.push(t),localStorage.setItem("tasks",JSON.stringify(n))}static saveProject(t){c.push(t);const e=[...new Set(c)];return localStorage.setItem("projects",JSON.stringify(e)),e}}class i extends l{static itemsFromStorage(){this.tasks(),this.projects()}static tasks(){null===localStorage.getItem("tasks")?n=[]:(n=JSON.parse(localStorage.getItem("tasks")),this.loadTasks(n))}static projects(){null===localStorage.getItem("projects")?c=[]:(c=JSON.parse(localStorage.getItem("projects")),this.loadProjects(c))}static loadTasks(t){for(let e=0;e<t.length;e++)a(t[e])}static loadProjects(t){o.createProject(t)}}const r=document.getElementById("form"),d=document.getElementById("add-task-link"),m=document.getElementById("add-task-btn"),g=document.getElementById("project-link");window.onload=function(){i.itemsFromStorage()},r.addEventListener("click",(t=>{t.preventDefault()})),d.addEventListener("click",(e=>{t.showForm(e)})),m.addEventListener("click",(()=>{const t=function(){document.getElementById("title-input").value,document.getElementById("description-input").value,document.getElementById("project-input").value,document.getElementById("priority-input").value,document.getElementById("date-input").value;const t=new s("Workout","workout before poop","Gym","high","11/21/2012");return a(t),t}();l.saveTask(t);const e=l.saveProject(t.project);o.createProject(e)})),g.addEventListener("click",(()=>{document.getElementById("project-list").classList.toggle("active")}))})();